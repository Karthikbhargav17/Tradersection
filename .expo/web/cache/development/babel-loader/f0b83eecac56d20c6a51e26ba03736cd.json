{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React from 'react';\nimport { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport { RadioButton } from 'react-native-paper';\nimport { firebase } from \"./firebase-config\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var user_id = '';\nexport var user_name = '';\n\nvar LoginScreen = function LoginScreen(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _React$useState = React.useState('Farmer'),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      checked = _React$useState2[0],\n      setChecked = _React$useState2[1];\n\n  var nav = props.navigation;\n\n  var onFooterLinkPress = function onFooterLinkPress() {\n    props.navigation.navigate('Registration');\n  };\n\n  useEffect(function () {}, []);\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsxs(KeyboardAwareScrollView, {\n      style: {\n        flex: 1,\n        width: '100%'\n      },\n      keyboardShouldPersistTaps: \"always\",\n      children: [_jsx(Image, {\n        style: styles.logo,\n        source: require(\"./assets/AppLogo.jpeg\")\n      }), _jsx(TextInput, {\n        style: styles.input,\n        placeholder: \"E-mail\",\n        placeholderTextColor: \"#aaaaaa\",\n        onChangeText: function onChangeText(text) {\n          return setEmail(text);\n        },\n        value: email,\n        underlineColorAndroid: \"transparent\",\n        autoCapitalize: \"none\"\n      }), _jsx(TextInput, {\n        style: styles.input,\n        placeholderTextColor: \"#aaaaaa\",\n        secureTextEntry: true,\n        placeholder: \"Password\",\n        onChangeText: function onChangeText(text) {\n          return setPassword(text);\n        },\n        value: password,\n        underlineColorAndroid: \"transparent\",\n        autoCapitalize: \"none\"\n      }), _jsxs(View, {\n        style: {\n          flexDirection: 'row',\n          paddingLeft: 25\n        },\n        children: [_jsx(RadioButton, {\n          color: \"black\",\n          value: \"Farmer\",\n          status: checked === 'Farmer' ? 'checked' : 'unchecked',\n          onPress: function onPress() {\n            return setChecked('Farmer');\n          }\n        }), _jsx(Text, {\n          style: {\n            paddingTop: 7\n          },\n          children: \"Farmer\"\n        }), _jsx(RadioButton, {\n          style: {\n            paddingLeft: 15\n          },\n          color: \"black\",\n          value: \"Trader\",\n          status: checked === 'Trader' ? 'checked' : 'unchecked',\n          onPress: function onPress() {\n            return setChecked('Trader');\n          }\n        }), _jsx(Text, {\n          style: {\n            paddingTop: 7\n          },\n          children: \"Trader\"\n        })]\n      }), _jsx(TouchableOpacity, {\n        style: styles.button,\n        onPress: function onPress() {\n          return alert('hi');\n        },\n        children: _jsx(Text, {\n          style: styles.buttonTitle,\n          children: \"Log in\"\n        })\n      }), _jsx(View, {\n        style: styles.footerView,\n        children: _jsxs(Text, {\n          style: styles.footerText,\n          children: [\"Don't have an account? \", _jsx(Text, {\n            onPress: function onPress() {\n              return alert('Hi');\n            },\n            style: styles.footerLink,\n            children: \"Sign up\"\n          })]\n        })\n      })]\n    })\n  });\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    backgroundColor: '#ffffff'\n  },\n  title: {},\n  logo: {\n    flex: 1,\n    height: 120,\n    width: 90,\n    alignSelf: \"center\",\n    margin: 30\n  },\n  input: {\n    height: 48,\n    borderRadius: 5,\n    overflow: 'hidden',\n    backgroundColor: 'white',\n    marginTop: 10,\n    marginBottom: 10,\n    marginLeft: 30,\n    marginRight: 30,\n    paddingLeft: 16\n  },\n  button: {\n    backgroundColor: '#788eec',\n    marginLeft: 30,\n    marginRight: 30,\n    marginTop: 20,\n    height: 48,\n    borderRadius: 5,\n    alignItems: \"center\",\n    justifyContent: 'center'\n  },\n  buttonTitle: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: \"bold\"\n  },\n  footerView: {\n    flex: 1,\n    alignItems: \"center\",\n    marginTop: 20\n  },\n  footerText: {\n    fontSize: 16,\n    color: '#2e2e2d'\n  },\n  footerLink: {\n    color: \"#788eec\",\n    fontWeight: \"bold\",\n    fontSize: 16\n  }\n});\nexport default LoginScreen;","map":{"version":3,"names":["React","useEffect","useState","KeyboardAwareScrollView","RadioButton","firebase","user_id","user_name","LoginScreen","props","email","setEmail","password","setPassword","loading","setLoading","checked","setChecked","nav","navigation","onFooterLinkPress","navigate","styles","container","flex","width","logo","require","input","text","flexDirection","paddingLeft","paddingTop","button","alert","buttonTitle","footerView","footerText","footerLink","StyleSheet","create","alignItems","backgroundColor","title","height","alignSelf","margin","borderRadius","overflow","marginTop","marginBottom","marginLeft","marginRight","justifyContent","color","fontSize","fontWeight"],"sources":["D:/LocalTrader/FinalTraderSection/LoginScreen.js"],"sourcesContent":["import React from 'react';\r\nimport { useEffect, useState } from 'react';\r\nimport { View, Text, StyleSheet,Image, TextInput, TouchableOpacity } from 'react-native';\r\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\r\nimport { RadioButton } from 'react-native-paper';\r\nimport { firebase } from './firebase-config'\r\nexport const user_id = ''\r\nexport var user_name = ''\r\nconst LoginScreen = props => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const [checked, setChecked] = React.useState('Farmer');\r\n    const nav = props.navigation;\r\n    \r\n    \r\n    const onFooterLinkPress = () => {\r\n        props.navigation.navigate('Registration')\r\n    }\r\n/*\r\n    const getUserData = async (uid) => {\r\n       if(checked=='Farmer')\r\n       {\r\n        const usersRef = firebase.firestore().collection('Farmer')\r\n        await usersRef\r\n                .doc(uid)\r\n                .get()\r\n                .then(firestoreDocument => {\r\n                    if (!firestoreDocument.exists) {\r\n                        alert(\"User does not exist anymore. Please register!\");\r\n                        return;\r\n                    }\r\n                    const userData = firestoreDocument.data();\r\n                    console.log(\"get User Data return object\", userData)                    \r\n                    var userID = userData.id;\r\n                    user_name = userData.name;\r\n                    \r\n                    return userData;                   \r\n                })\r\n                .catch(error => {\r\n                    console.log(\"not able to retrieve user info\");\r\n                    alert(error);\r\n                    return null;\r\n                });\r\n       }\r\n       else{\r\n        const usersRef = firebase.firestore().collection('Trader')\r\n        await usersRef\r\n                .doc(uid)\r\n                .get()\r\n                .then(firestoreDocument => {\r\n                    if (!firestoreDocument.exists) {\r\n                        alert(\"User does not exist anymore. Please register!\");\r\n                        return;\r\n                    }\r\n                    const userData = firestoreDocument.data();\r\n                    console.log(\"get User Data return object\", userData)                    \r\n                    var userID = userData.id;\r\n                    localStorage.setItem(\"user_id\", userID);\r\n                    return userData;                   \r\n                })\r\n                .catch(error => {\r\n                    console.log(\"not able to retrieve user info\");\r\n                    alert(error);\r\n                    return null;\r\n                });\r\n       }\r\n\r\n    }\r\n    \r\n    const onLoginPress = () => {\r\n        return async() => {\r\n            console.log(\"Login Pressed\");\r\n            await firebase\r\n                .auth()\r\n                .signInWithEmailAndPassword(email, password)\r\n                .then((response) => {\r\n                    console.log(\"Signed IN\");\r\n                    return;              \r\n                })\r\n                .catch(error => {\r\n                    alert(error)\r\n                })\r\n            }\r\n    }\r\n\r\n    const popupateUserStateOnLogin = async () => {\r\n        await firebase.auth().onAuthStateChanged( (user) => {\r\n          if (user) {\r\n            \r\n            console.log(\"User Authenticated\");\r\n            \r\n            getUserData(user.uid).then( (userData) => {\r\n                nav.navigate('Index', {user_id: user.uid})\r\n            })\r\n            .catch((error) => {\r\n              console.log(error)\r\n              setLoading(false);\r\n              return(\r\n                <><Text>There seems to be problem, please come back later!...</Text></>\t\r\n              );\r\n            });\r\n          } else {\r\n            setLoading(false);\r\n          }\r\n        })\r\n      }\r\n*/\r\n      \r\n      useEffect(() => {\r\n      //  popupateUserStateOnLogin();\r\n      }, []);\r\n    \r\n      // Display the loading screen first then determine to show login screen or IndexTabScreen\r\n      //Replace the Text with some nice animation\r\n/*\r\n      if (loading) {\t\r\n        return (\t\r\n          <><Text>Loading...</Text></>\t\r\n        )\t\r\n      }\r\n*/\r\n    return (\r\n        <View style={styles.container}>\r\n            <KeyboardAwareScrollView\r\n                style={{ flex: 1, width: '100%' }}\r\n                keyboardShouldPersistTaps=\"always\">\r\n                <Image\r\n                    style={styles.logo}\r\n                    source={require('./assets/AppLogo.jpeg')}\r\n                />\r\n                <TextInput\r\n                    style={styles.input}\r\n                    placeholder='E-mail'\r\n                    placeholderTextColor=\"#aaaaaa\"\r\n                    onChangeText={(text) => setEmail(text)}\r\n                    value={email}\r\n                    underlineColorAndroid=\"transparent\"\r\n                    autoCapitalize=\"none\"\r\n                />\r\n                <TextInput\r\n                    style={styles.input}\r\n                    placeholderTextColor=\"#aaaaaa\"\r\n                    secureTextEntry\r\n                    placeholder='Password'\r\n                    onChangeText={(text) => setPassword(text)}\r\n                    value={password}\r\n                    underlineColorAndroid=\"transparent\"\r\n                    autoCapitalize=\"none\"\r\n                />\r\n                <View style={{flexDirection:'row',paddingLeft:25}}>\r\n                    <RadioButton\r\n                        color='black'\r\n                        value=\"Farmer\"\r\n                        status={ checked === 'Farmer' ? 'checked' : 'unchecked' }\r\n                        onPress={() => setChecked('Farmer')}\r\n                        \r\n                    />\r\n                    <Text style={{paddingTop:7}}>Farmer</Text>\r\n                    <RadioButton style={{paddingLeft:15}}\r\n                        color='black'\r\n                        value=\"Trader\"\r\n                        status={ checked === 'Trader' ? 'checked' : 'unchecked' }\r\n                        onPress={() => setChecked('Trader')}\r\n                    />\r\n                    <Text style={{paddingTop:7}}>Trader</Text>\r\n                </View>\r\n                <TouchableOpacity\r\n                    style={styles.button}\r\n                    onPress={() => alert('hi')}>\r\n                    <Text style={styles.buttonTitle}>Log in</Text>\r\n                </TouchableOpacity>\r\n                \r\n                <View style={styles.footerView}>\r\n                    <Text style={styles.footerText}>Don't have an account? <Text onPress={()=>alert('Hi')} style={styles.footerLink}>Sign up</Text></Text>\r\n                </View>\r\n            </KeyboardAwareScrollView>\r\n        </View>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        backgroundColor:'#ffffff'\r\n    },\r\n    title: {\r\n\r\n    },\r\n    logo: {\r\n        flex: 1,\r\n        height: 120,\r\n        width: 90,\r\n        alignSelf: \"center\",\r\n        margin: 30\r\n    },\r\n    input: {\r\n        height: 48,\r\n        borderRadius: 5,\r\n        overflow: 'hidden',\r\n        backgroundColor: 'white',\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n        marginLeft: 30,\r\n        marginRight: 30,\r\n        paddingLeft: 16\r\n    },\r\n    button: {\r\n        backgroundColor: '#788eec',\r\n        marginLeft: 30,\r\n        marginRight: 30,\r\n        marginTop: 20,\r\n        height: 48,\r\n        borderRadius: 5,\r\n        alignItems: \"center\",\r\n        justifyContent: 'center'\r\n    },\r\n    buttonTitle: {\r\n        color: 'white',\r\n        fontSize: 16,\r\n        fontWeight: \"bold\"\r\n    },\r\n    footerView: {\r\n        flex: 1,\r\n        alignItems: \"center\",\r\n        marginTop: 20\r\n    },\r\n    footerText: {\r\n        fontSize: 16,\r\n        color: '#2e2e2d'\r\n    },\r\n    footerLink: {\r\n        color: \"#788eec\",\r\n        fontWeight: \"bold\",\r\n        fontSize: 16\r\n    }\r\n});\r\n\r\nexport default LoginScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}